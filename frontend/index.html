<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="static/styles/style.css" />
    <script
      src="https://kit.fontawesome.com/9c56ada9a6.js"
      crossorigin="anonymous"
    ></script>
    <title>AirBnBClone</title>
  </head>
  <body>
    <div class="header">
      <nav id="navBar">
        <img src="static/styles/images/logo1.png" class="logo1" />
        <ul class="nav-links">
          <li><a href="#" class="active">Popular Places</a></li>
          <li><a href="#">Travel Outside</a></li>
          <li><a href="listing.html">Online Packages</a></li>
        </ul>
        <a href="#" class="register-btn">Register Now</a>
        <i class="fas fa-bars" onclick="togglebtn()"></i>
      </nav>
      <div class="container">
        <h1>Find Your Next Stay</h1>
        <div class="search-bar">
          <form id="searchForm">
            <div class="location-input">
              <label>Location</label>
              <input
                id="search-form-location"
                type="text"
                placeholder="Where are you going?"
              />
            </div>
            <div>
              <label>Check in</label>
              <input
                id="search-form-check-in-date"
                type="date"
                placeholder="Add Check In Date"
              />
            </div>
            <div>
              <label>Check out</label>
              <input
                id="search-form-check-out-date"
                type="date"
                placeholder="Add Check Out Date"
              />
            </div>
            <div>
              <label>Guest</label>
              <input
                id="search-form-guests"
                type="number"
                placeholder="Add Guests"
              />
            </div>
            <button type="submit">
              <img src="static/styles/images/search.png" />
            </button>
          </form>
        </div>
      </div>
      <script>
        document
          .getElementById("searchForm")
          .addEventListener("submit", function (event) {
            event.preventDefault();

            var location = document.getElementById(
              "search-form-location",
            ).value;
            var checkIn = document.getElementById(
              "search-form-check-in-date",
            ).value;
            var checkOut = document.getElementById(
              "search-form-check-out-date",
            ).value;
            var guest = document.getElementById("search-form-guests").value;

            var searchParams = {};

            if (location) {
              searchParams.location = location;
            }

            if (checkIn) {
              searchParams.check_in_date = checkIn;
            }

            if (checkOut) {
              searchParams.check_out_date = checkOut;
            }

            if (guest) {
              searchParams.guests = guest;
            }

            var queryParams = new URLSearchParams(searchParams).toString();

            fetch(`http://localhost:8000/api/listings?${queryParams}`, {})
              .then((response) => {
                if (!response.ok) {
                  throw new Error(
                    `${response.status} - ${response.statusText}`,
                  );
                }
                return response.json();
              })
              .then((responseData) => {
                localStorage.setItem("listings", JSON.stringify(responseData));
                localStorage.setItem(
                  "searchParams",
                  JSON.stringify(searchParams),
                );

                window.location.assign("results.html");
              })
              .catch((error) => {
                alert("An error occurred. Please try again later.\n\n" + error);
              });
          });
      </script>
    </div>
    <div class="container"></div>
    <h2 class="sub-title">Exsclusives</h2>
    <div class="exclusives">
      <div>
        <img src="static/styles/images/image-1.png" />
        <span>
          <h3>London</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-2.png" />
        <span>
          <h3>Swizerland</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-3.png" />
        <span>
          <h3>Australia</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-4.png" />
        <span>
          <h3>France</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-5.png" />
        <span>
          <h3>Amsterdam</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-6.png" />
        <span>
          <h3>Nitherlands</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-7.png" />
        <span>
          <h3>New York</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-8.png" />
        <span>
          <h3>Chicago</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-9.png" />
        <span>
          <h3>San Francisco</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
      <div>
        <img src="static/styles/images/image-10.png" />
        <span>
          <h3>Shanghai</h3>
          <p>Starts @ £100</p>
        </span>
      </div>
    </div>
    <h2 class="sub-title">Trending Places</h2>
    <div class="trending">
      <div>
        <img src="static/styles/images/dubai.png" />
        <h3>Dubai</h3>
      </div>
      <div>
        <img src="static/styles/images/new-york.png" />
        <h3>New York</h3>
      </div>
      <div>
        <img src="static/styles/images/paris.png" />
        <h3>Paris</h3>
      </div>
      <div>
        <img src="static/styles/images/new-delhi.png" />
        <h3>New Delhi</h3>
      </div>
    </div>
    <div class="cta">
      <h3>Sharing <br />Is Earning Now</h3>
      <p>Great opportunity to make money by <br />sharing your exstra space.</p>
      <a href="#" class="cta-btn">Know more</a>
    </div>
    <h2 class="sub-title">Travellers Stories</h2>
    <div class="stories">
      <div>
        <img src="static/styles/images/story-1.png" />
        <p>Popular European countries with a budget of just £3000</p>
      </div>
      <div>
        <img src="static/styles/images/story-2.png" />
        <p>Traveled more than 100 Countries in less than a year</p>
      </div>
      <div>
        <img src="static/styles/images/story-3.png" />
        <p>Best experience you get while traveling to Thailand</p>
      </div>
    </div>
    <a href="#" class="start-btn">Start making money</a>
    <div class="about-msg">
      <h2>About Staybnb</h2>
      <p>
        Staybnb is a company operating an online marketplace for
        short-and-long-term homestays and experiences in various countries and
        regions.<br />
        The company acts as a broker and charges a commission from each booking.
      </p>
    </div>
    <div class="footer">
      <a href="https://facebook.com/"><i class="fa-brands fa-facebook"></i></a>
      <a href="https://youtube.com/"><i class="fa-brands fa-youtube"></i></a>
      <a href="https://twitter.com/"><i class="fa-brands fa-twitter"></i></a>
      <a href="https://linkedin.com/"
        ><i class="fa-brands fa-linkedin-in"></i
      ></a>
      <a href="https://instagram.com/"
        ><i class="fa-brands fa-instagram"></i
      ></a>
      <hr />
      <p>Course work for module SWE5203 @ HE17120, HE22919</p>
    </div>
    <script>
      var navBar = document.getElementById("navBar");
      function togglebtn() {
        navBar.classList.toggle("hidemenu");
      }
    </script>
  </body>
</html>
